<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è¦ªå­æ—…éŠç®¡ç† App</title>
<link rel="manifest" href="manifest.json">

<style>
body{
  font-family:-apple-system;
  margin:0;
  background:#f2f2f7;
  text-align:center;
}

.header{
  background:#007aff;
  color:white;
  padding:15px;
  font-size:18px;
}

.countdown{
  background:white;
  margin:10px;
  padding:10px;
  border-radius:12px;
  font-weight:bold;
}

.day{
  font-size:24px;
  margin-top:20px;
}

.card{
  background:white;
  margin:10px;
  padding:15px;
  border-radius:16px;
}

button{
  padding:8px 12px;
  margin:5px;
  border:none;
  border-radius:12px;
  background:#007aff;
  color:white;
}

.expense-input{
  padding:8px;
  margin:5px;
  width:40%;
}

.total{
  font-weight:bold;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="header">
ä»Šå¤©æ˜¯æ—…ç¨‹ç¬¬ <span id="tripDay">1</span> å¤©
</div>

<div class="countdown" id="countdown">
âœˆï¸ è·é›¢å‡ºç™¼è¨ˆç®—ä¸­...
</div>

<div class="day" id="dayTitle">Day 1</div>

<div class="card" id="schedule"></div>

<button onclick="prevDay()">â† å‰ä¸€å¤©</button>
<button onclick="nextDay()">å¾Œä¸€å¤© â†’</button>

<hr>

<h3>ğŸ’° æ—…éŠè¨˜å¸³</h3>

<input class="expense-input" id="expenseName" placeholder="é …ç›®">
<input class="expense-input" id="expenseAmount" type="number" placeholder="é‡‘é¡">
<br>
<button onclick="addExpense()">æ–°å¢æ”¯å‡º</button>

<div id="expenseList"></div>
<div class="total" id="totalAmount">ç¸½é‡‘é¡ï¼š0 å…ƒ</div>

<script>
/* ===== åŸºæœ¬è¨­å®š ===== */

const tripStart = new Date("2026-03-11T08:00:00");
const tripDays = 6;

const scheduleData = [
  {title:"âœˆï¸ å°ç£ â†’ åå¤å±‹", location:"Nagoya Airport"},
  {title:"æ¨‚é«˜æ¨‚åœ’", location:"LEGOLAND Japan"},
  {title:"å‰åœåŠ›å…¬åœ’", location:"Ghibli Park Aichi"},
  {title:"åå¤å±‹åŸ + æ¦®", location:"Nagoya Castle"},
  {title:"ç§»å‹•åˆ°å¤§é˜ª", location:"Shin-Osaka Station"},
  {title:"âœˆï¸ å›å°ç£", location:"Kansai International Airport"}
];

/* ===== è¨ˆç®—æ—…ç¨‹å¤©æ•¸ ===== */

function calculateTripDay(){
  const now = new Date();
  const diff = now - tripStart;
  const day = Math.floor(diff/(1000*60*60*24))+1;
  if(day>0 && day<=tripDays){return day;}
  return 1;
}

let currentDay = calculateTripDay();
updateDay();

/* ===== æ›´æ–°ç•«é¢ ===== */

function updateDay(){
  document.getElementById("tripDay").innerText = currentDay;
  document.getElementById("dayTitle").innerText = "Day "+currentDay;

  const data = scheduleData[currentDay-1];

  document.getElementById("schedule").innerHTML =
  data.title + "<br><br>" +
  "<button onclick='openMap(\""+data.location+"\")'>ğŸ—º å°èˆª</button>";
}

function prevDay(){ if(currentDay>1){currentDay--; updateDay();}}
function nextDay(){ if(currentDay<tripDays){currentDay++; updateDay();}}

function openMap(place){
  window.open("https://www.google.com/maps/search/?api=1&query="+encodeURIComponent(place));
}

/* ===== æ©Ÿå ´å€’æ•¸ ===== */

function updateCountdown(){
  const now = new Date();
  const diff = tripStart - now;

  if(diff>0){
    const days = Math.floor(diff/(1000*60*60*24));
    const hours = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
    const mins = Math.floor((diff%(1000*60*60))/(1000*60));

    document.getElementById("countdown").innerText =
    `âœˆï¸ è·é›¢å‡ºç™¼é‚„æœ‰ ${days} å¤© ${hours} å°æ™‚ ${mins} åˆ†`;
  } else {
    document.getElementById("countdown").innerText="ğŸ‰ å·²å‡ºç™¼ï¼";
  }
}

setInterval(updateCountdown,60000);
updateCountdown();

/* ===== è¨˜å¸³åŠŸèƒ½ ===== */

let expenses = JSON.parse(localStorage.getItem("expenses")) || [];

function addExpense(){
  const name = document.getElementById("expenseName").value;
  const amount = parseInt(document.getElementById("expenseAmount").value);

  if(!name || !amount) return;

  expenses.push({name,amount});
  localStorage.setItem("expenses",JSON.stringify(expenses));

  document.getElementById("expenseName").value="";
  document.getElementById("expenseAmount").value="";

  renderExpenses();
}

function renderExpenses(){
  let html="";
  let total=0;

  expenses.forEach(e=>{
    html += e.name + " - " + e.amount + " å…ƒ<br>";
    total+=e.amount;
  });

  document.getElementById("expenseList").innerHTML=html;
  document.getElementById("totalAmount").innerText="ç¸½é‡‘é¡ï¼š"+total+" å…ƒ";
}

renderExpenses();
</script>

</body>
</html>