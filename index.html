<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ—¥æœ¬è¦ªå­è¡Œç¨‹</title>
<script src="https://cdn.tailwindcss.com"></script>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#F97316">

<style>
body { padding-bottom:80px; }
.day-header {
background:#F97316;
color:white;
padding:12px;
text-align:center;
font-weight:bold;
}
</style>
</head>

<body class="bg-gray-100">

<!-- ===== é ‚éƒ¨æ§åˆ¶åˆ— ===== -->
<div class="bg-orange-600 text-white p-3 flex items-center justify-between">

<button onclick="prevDay()" class="px-3">â—€</button>

<div class="text-center">
<div id="dayIndicator" class="font-bold"></div>
<div class="text-xs opacity-80">3/11 - 3/16</div>
</div>

<button onclick="nextDay()" class="px-3">â–¶</button>

</div>

<!-- å¿«é€Ÿåˆ‡æ› -->
<div class="bg-white flex justify-center space-x-2 py-2 shadow">
<button onclick="goToDay(0)">D1</button>
<button onclick="goToDay(1)">D2</button>
<button onclick="goToDay(2)">D3</button>
<button onclick="goToDay(3)">D4</button>
<button onclick="goToDay(4)">D5</button>
<button onclick="goToDay(5)">D6</button>
</div>

<!-- ===== è¡Œç¨‹å…§å®¹ ===== -->
<div id="scheduleContainer"></div>

<!-- ===== é«”åŠ›æ¢ ===== -->
<div class="fixed bottom-0 left-0 w-full bg-white shadow-lg p-3">
<div class="flex justify-between text-xs mb-1">
<span>ä»Šæ—¥é«”åŠ›</span>
<span id="energyPercent">0%</span>
</div>
<div class="w-full bg-gray-200 rounded-full h-3">
<div id="energyBar" class="h-3 rounded-full bg-green-500" style="width:0%"></div>
</div>
</div>

<script>

/* ===== è¡Œç¨‹è³‡æ–™ ===== */
const tripStart = new Date("2026-03-11");

const scheduleData = [
{
title:"D1 æŠµé”å¤§é˜ª",
date:"2026-03-11",
events:[
{time:"12:30",name:"é£¯åº—ï¼‹æ¢…ç”°åˆé¤",transport:"æ­¥è¡Œ",energy:20,map:"https://maps.google.com?q=Hotel Hankyu Respire Osaka"}
]
},
{
title:"D2 æµ·éŠé¤¨",
date:"2026-03-12",
events:[
{time:"10:30",name:"æµ·éŠé¤¨",transport:"åœ°éµä¸­å¤®ç·š",energy:35,map:"https://maps.google.com?q=Osaka Kaiyukan"},
{time:"15:00",name:"å¤©ä¿å±±æ‘©å¤©è¼ª",transport:"æ­¥è¡Œ5åˆ†é˜",energy:10,map:"https://maps.google.com?q=Tempozan Ferris Wheel"}
]
},
{
title:"D3 åå¤å±‹ç§»å‹•",
date:"2026-03-13",
events:[
{time:"09:00",name:"æ–°å¹¹ç·šå‰å¾€åå¤å±‹",transport:"æ–°å¹¹ç·š",energy:30,map:"https://maps.google.com?q=Nagoya Station"}
]
},
{
title:"D4 å‰åœåŠ›å…¬åœ’",
date:"2026-03-14",
events:[
{time:"10:00",name:"å‰åœåŠ›å¤§å€‰åº«",transport:"åœ°éµæ±å±±ç·š",energy:50,map:"https://maps.google.com?q=Ghibli Park"}
]
},
{
title:"D5 éµé“é¤¨",
date:"2026-03-15",
events:[
{time:"11:00",name:"ç£æµ®éµé“é¤¨",transport:"é’æ³¢ç·š",energy:40,map:"https://maps.google.com?q=SCMAGLEV Railway Park"}
]
},
{
title:"D6 æ¨‚é«˜æ¨‚åœ’",
date:"2026-03-16",
events:[
{time:"10:00",name:"æ¨‚é«˜æ¨‚åœ’",transport:"é’æ³¢ç·š",energy:45,map:"https://maps.google.com?q=LEGOLAND Japan"}
]
}
];

let currentDayIndex = 0;

/* ===== åˆå§‹åŒ– ===== */
function init(){
const today = new Date();
const diff = Math.floor((today - tripStart)/(1000*60*60*24));
if(diff>=0 && diff<scheduleData.length){
currentDayIndex = diff;
}
renderDay();
}

function renderDay(){
const data = scheduleData[currentDayIndex];
document.getElementById("dayIndicator").innerText =
`ä»Šå¤©æ˜¯æ—…ç¨‹ç¬¬ ${currentDayIndex+1} å¤©`;

let html = `<div class="p-4 space-y-4">`;

let totalEnergy = 0;

data.events.forEach(e=>{
totalEnergy += e.energy;
html += `
<div class="bg-white p-4 rounded-xl shadow">
<p class="font-bold">${e.time} ${e.name}</p>
<p class="text-sm text-gray-500">ğŸš„ ${e.transport}</p>
<a href="${e.map}" target="_blank"
class="mt-2 inline-block text-blue-600 text-sm">
ğŸ“ æ‰“é–‹åœ°åœ–
</a>
</div>
`;
});

html += "</div>";
document.getElementById("scheduleContainer").innerHTML = html;

updateEnergy(totalEnergy);
}

function updateEnergy(total){
let percent = Math.min(total,120);
document.getElementById("energyBar").style.width = percent+"%";
document.getElementById("energyPercent").innerText = percent+"%";

const bar = document.getElementById("energyBar");

if(percent>=100) bar.className="h-3 rounded-full bg-red-500";
else if(percent>=80) bar.className="h-3 rounded-full bg-orange-500";
else bar.className="h-3 rounded-full bg-green-500";
}

/* ===== åˆ‡æ›åŠŸèƒ½ ===== */
function nextDay(){
if(currentDayIndex < scheduleData.length-1){
currentDayIndex++;
renderDay();
}
}
function prevDay(){
if(currentDayIndex > 0){
currentDayIndex--;
renderDay();
}
}
function goToDay(i){
currentDayIndex = i;
renderDay();
}

/* ===== æ‰‹å‹¢æ»‘å‹• ===== */
let startX = 0;
document.addEventListener("touchstart", e=>{
startX = e.touches[0].clientX;
});
document.addEventListener("touchend", e=>{
let diff = e.changedTouches[0].clientX - startX;
if(diff > 50) prevDay();
if(diff < -50) nextDay();
});

init();

</script>

</body>
</html>