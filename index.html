<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>京阪名親子遊 V8 (更新第三天)</title>
    <style>
        :root { --primary: #007aff; --bg: #f2f2f7; --card-bg: #ffffff; --text: #1c1c1e; --gray: #8e8e93; --accent: #34c759; --danger: #ff3b30; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 0; background: var(--bg); color: var(--text); padding-bottom: 40px; }
        .header { background: linear-gradient(135deg, #007aff, #5856d6); color: white; padding: 20px 15px; text-align: center; }
        .weather-info { background: rgba(255, 255, 255, 0.15); border-radius: 12px; padding: 8px; margin-top: 10px; font-size: 0.85rem; display: inline-block; }
        .card { background: var(--card-bg); margin: 12px; padding: 18px; border-radius: 18px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .schedule-list { list-style: none; padding: 0; }
        .schedule-item { padding: 12px; border-radius: 12px; margin-bottom: 8px; background: #f8f8fa; display: flex; align-items: flex-start; gap: 10px; cursor: pointer; position: relative; border: 2px solid transparent; }
        .schedule-item.active { border-color: var(--primary); background: #f0f7ff; }
        .schedule-time { font-size: 0.75rem; color: var(--primary); font-weight: bold; min-width: 50px; }
        .schedule-text { font-size: 0.95rem; font-weight: 600; flex: 1; padding-right: 25px; }
        .del-item { position: absolute; right: 8px; top: 12px; color: var(--danger); cursor: pointer; padding: 5px; }
        iframe { width: 100%; height: 230px; border: none; border-radius: 14px; margin-bottom: 15px; background: #eee; }
        .nav-btns { display: flex; justify-content: space-between; margin-top: 15px; }
        button { padding: 12px 20px; border: none; border-radius: 12px; background: var(--primary); color: white; font-weight: 600; cursor: pointer; }
    </style>
</head>
<body>

<div class="header">
    <h2 id="dayDisplay" style="margin:0">Day 3</h2>
    <div id="dateDisplay">3月13日</div>
    <div id="weatherDisplay" class="weather-info">⏳ 天氣載入中...</div>
</div>

<div class="card">
    <iframe id="mapFrame"></iframe>
    <ul id="scheduleList" class="schedule-list"></ul>
    <div class="nav-btns">
        <button onclick="changeDay(-1)">← 上一天</button>
        <button onclick="changeDay(1)">下一天 →</button>
    </div>
</div>

<script>
const SCHEDULE_DATA = [
    { date: "3月11日", city: "Osaka", lat: 34.69, lon: 135.50, items: [
        { id: "1_1", time: "06:55", title: "虎航 IT284", loc: "Kansai International Airport" },
        { id: "1_2", time: "14:00", title: "大阪龍仕柏飯店", loc: "Hotel Hankyu RESPIRE OSAKA" },
        { id: "1_3", time: "16:00", title: "梅田空中庭園", loc: "Umeda Sky Building" }
    ]},
    { date: "3月12日", city: "Osaka", lat: 34.69, lon: 135.50, items: [
        { id: "2_1", time: "10:00", title: "海遊館", loc: "Osaka Kaiyukan Aquarium" },
        { id: "2_2", time: "12:30", title: "天保山購物中心", loc: "Tempozan Marketplace" }
    ]},
    { date: "3月13日", city: "Nagoya", lat: 35.18, lon: 136.90, items: [
        { id: "3_1", time: "09:30", title: "新幹線：大阪往名古屋", loc: "Nagoya Station" },
        { id: "3_2", time: "11:30", title: "名古屋站飯店寄行李", loc: "Nagoya Station West" },
        { id: "3_3", time: "12:45", title: "午餐：矢場豬排或棊子麵", loc: "Nagoya Station" },
        { id: "3_4", time: "14:30", title: "榮站：寶可夢中心與榮商圈", loc: "Sakae Station Nagoya" },
        { id: "3_5", time: "17:00", title: "綠洲21與電視塔點燈", loc: "Oasis 21" },
        { id: "3_6", time: "18:30", title: "晚餐：鰻魚飯或風來坊雞翅", loc: "Nagoya Station" },
        { id: "3_7", time: "20:30", title: "飯店補貨 (藥妝/超商)", loc: "Nagoya Station" }
    ]},
    { date: "3月14日", city: "Nagoya", lat: 35.18, lon: 136.90, items: [{ id: "4_1", time: "10:00", title: "吉卜力公園", loc: "Ghibli Park" }]},
    { date: "3月15日", city: "Nagoya", lat: 35.18, lon: 136.90, items: [{ id: "5_1", time: "10:00", title: "磁浮鐵道館", loc: "SCMAGLEV and Railway Park" }]},
    { date: "3月16日", city: "Nagoya", lat: 35.18, lon: 136.90, items: [{ id: "6_1", time: "09:30", title: "樂高樂園", loc: "LEGOLAND Japan" }]}
];

let currentDay = 3; 

function updateUI() {
    const dayData = SCHEDULE_DATA[currentDay - 1];
    document.getElementById("dayDisplay").innerText = `第 ${currentDay} 天`;
    document.getElementById("dateDisplay").innerText = dayData.date;
    
    const listEl = document.getElementById("scheduleList");
    listEl.innerHTML = dayData.items.map(item => `
        <li class="schedule-item" onclick="setMap('${item.loc}', this)">
            <div class="schedule-time">${item.time}</div>
            <div class="schedule-text">${item.title}</div>
            <span class="del-item" onclick="deleteItem('${item.id}', event)">✕</span>
        </li>
    `).join("");
    
    if (dayData.items.length > 0) setMap(dayData.items[0].loc);
}

function setMap(loc) {
    document.getElementById("mapFrame").src = `https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d1000!2d135!3d35!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1szh-TW!2stw!4v1!5m2!1szh-TW!2stw&q=${encodeURIComponent(loc)}`;
}

function deleteItem(id, event) {
    event.stopPropagation();
    if(confirm("確定刪除此行程？")) {
        SCHEDULE_DATA[currentDay-1].items = SCHEDULE_DATA[currentDay-1].items.filter(i => i.id !== id);
        updateUI();
    }
}

function changeDay(step) {
    if (currentDay + step >= 1 && currentDay + step <= 6) {
        currentDay += step;
        updateUI();
    }
}

updateUI();
</script>
</body>
</html>